= Annex A (normative) Abstract Test Suite

== A.1 Conformance Class: _Core_

*Conformance Class IRI*: `/conf/core` 

=== A.1.1 `/conf/core/sparql-protocol`

*Requirement*: `/req/core/sparql-protocol`

Implementations shall support the SPARQL Query Language for RDF <<SPARQL>>, the SPARQL Protocol for RDF <<SPARQLPROT>> and the SPARQL Query Results XML Format <<SPARQLRESX>>.

[loweralpha]
.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that the implementation accepts SPARQL queries and returns the correct results in the correct format, according to the SPARQL Query Language for RDF, the SPARQL Protocol for RDF and SPARQL Query Results XML Format W3C specifications.
.. *Reference*: <<_sparql_2>>
.. *Test Type*: Capabilities

=== A.1.2 `/conf/core/spatial-object-class`

*Requirement*: `/req/core/spatial-object-class`

Implementations shall allow the RDFS class http://www.opengis.net/ont/geosparql#SpatialObject[geo:SpatialObject] to be used in SPARQL graph 
patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving http://www.opengis.net/ont/geosparql#SpatialObject[geo:SpatialObject] return the correct result on a test dataset.
.. *Reference*: <<_class_geospatialobject>>
.. *Test Type*: Capabilities

=== A.1.3 `/conf/core/spatial-measure-class`

*Requirement*: `/req/core/spatial-measure-class`
Implementations shall allow the RDFS class http://www.opengis.net/ont/geosparql#SpatialMeasure[geo:SpatialMeasure] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving http://www.opengis.net/ont/geosparql#SpatialMeasure[geo:SpatialMeasure] return the correct result on a test dataset.
.. *Reference*: <<_class_geospatialmeasure>>
.. *Test Type*: Capabilities

=== A.1.3 `/conf/core/feature-class`

*Requirement*: `/req/core/feature-class`
Implementations shall allow the RDFS class http://www.opengis.net/ont/geosparql#Feature[geo:Feature] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving http://www.opengis.net/ont/geosparql#Feature[geo:Feature] return the correct result on a test dataset.
.. *Reference*: <<_class_geofeature>>
.. *Test Type*: Capabilities

== A.2 Conformance Class: Topology Vocabulary Extension (relation_family) 

*Conformance Class IRI*: `/conf/topology-vocab-extension`

=== A.2.1 relation_family = Simple Features
==== A.2.1.1 `/conf/topology-vocab-extension/sf-spatial-relations`
*Requirement*: `/req/topology-vocab-extension/sf-spatial-relations`
Implementations shall allow the properties http://www.opengis.net/ont/geosparql#sfEquals[`geo:sfEquals`], http://www.opengis.net/ont/geosparql#sfDisjoint[`geo:sfDisjoint`], http://www.opengis.net/ont/geosparql#sfIntersects[`geo:sfIntersects`], http://www.opengis.net/ont/geosparql#sfTouches[`geo:sfTouches`], http://www.opengis.net/ont/geosparql#sfCrosses[`geo:sfCrosses`], http://www.opengis.net/ont/geosparql#sfWithin[`geo:sfWithin`], http://www.opengis.net/ont/geosparql#sfContains[`geo:sfContains`], http://www.opengis.net/ont/geosparql#sfOverlaps[`geo:sfOverlaps`] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving these properties return the correct result for a test dataset.
.. *Reference*: <<_simple_features_relation_family_relation_familysimple_features>>
.. *Test Type*: Capabilities

=== A.2.2 relation_family = Egenhofer
==== A.2.2.1 `/conf/topology-vocab-extension/eh-spatial-relations`
*Requirement*: `/req/topology-vocab-extension/eh-spatial-relations`
Implementations shall allow the properties http://www.opengis.net/ont/geosparql#ehEquals[`geo:ehEquals`], http://www.opengis.net/ont/geosparql#ehDisjoint[`geo:ehDisjoint`], http://www.opengis.net/ont/geosparql#ehMeet[`geo:ehMeet`], http://www.opengis.net/ont/geosparql#ehOverlap[`geo:ehOverlap`], http://www.opengis.net/ont/geosparql#ehCovers[`geo:ehCovers`], http://www.opengis.net/ont/geosparql#ehCoveredBy[`geo:ehCoveredBy`], http://www.opengis.net/ont/geosparql#ehInside[ `geo:ehInside`], http://www.opengis.net/ont/geosparql#ehContains[`geo:ehContains`] to be used in SPARQL graph patterns. 

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving these properties return the correct result for a test dataset.
.. *Reference*: <<_egenhofer_relation_family_relation_familyegenhofer>>
.. *Test Type*: Capabilities

=== A.2.3 relation_family = RCC8
==== A.2.3.1 `/conf/topology-vocab-extension/rcc8-spatial-relations`
*Requirement*: `/req/topology-vocab-extension/rcc8-spatial-relations`
Implementations shall allow the properties http://www.opengis.net/ont/geosparql#rcc8eq[`geo:rcc8eq`], http://www.opengis.net/ont/geosparql#rcc8dc[`geo:rcc8dc`], http://www.opengis.net/ont/geosparql#rcc8ec[`geo:rcc8ec`], http://www.opengis.net/ont/geosparql#rcc8po[`geo:rcc8po`], http://www.opengis.net/ont/geosparql#rcc8tppi[`geo:rcc8tppi`], http://www.opengis.net/ont/geosparql#rcc8tpp[`geo:rcc8tpp`], http://www.opengis.net/ont/geosparql#rcc8tpp[`geo:rcc8ntpp`], http://www.opengis.net/ont/geosparql#rcc8tppi[`geo:rcc8ntppi`] to be used in SPARQL graph patterns

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving these properties return the correct result for a test dataset.
.. *Reference*: <<_rcc8_relation_family_relation_familyrcc8>>
.. *Test Type*: Capabilities

== A.3 Conformance Class: Geometry Extension (serialization, version) 

*Conformance Class IRI*: `/conf/geometry-extension`

=== A.3.1 Tests for all Serializations
==== A.3.1.1 `/conf/geometry-extension/geometry-class`
*Requirement*: `/req/geometry-extension/geometry-class`
Implementations shall allow the RDFS class http://www.opengis.net/ont/geosparql#Geometry[`geo:Geometry`] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving http://www.opengis.net/ont/geosparql#Geometry[`geo:Geometry`] return the correct result on a test dataset
.. *Reference*: <<_class_geogeometry>>
.. *Test Type*: Capabilities

==== A.3.1.2 `/conf/geometry-extension/feature-properties`
*Requirement*: `/req/geometry-extension/feature-properties`
Implementations shall allow the properties http://www.opengis.net/ont/geosparql#hasGeometry[`geo:hasGeometry`] and http://www.opengis.net/ont/geosparql#hasDefaultGeometry[`geo:hasDefaultGeometry`], 
http://www.opengis.net/ont/geosparql#hasLength[`geo:hasLength`],
http://www.opengis.net/ont/geosparql#hasArea[`geo:hasArea`],
http://www.opengis.net/ont/geosparql#hasCentroid[`geo:hasVolume`]
http://www.opengis.net/ont/geosparql#hasBoundingBox[`geo:hasBoundingBox`]
http://www.opengis.net/ont/geosparql#hasCentroid[`geo:hasCentroid`] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving these properties return the correct result for a test dataset.
.. *Reference*: <<_standard_properties_for_geofeature>>
.. *Test Type*: Capabilities

==== A.3.1.3 `/conf/geometry-extension/geometry-properties`
*Requirement*: `/req/geometry-extension/geometry-properties`
Implementations shall allow the properties http://www.opengis.net/ont/geosparql#dimension[`geo:dimension`], http://www.opengis.net/ont/geosparql#coordinateDimension[`geo:coordinateDimension`], http://www.opengis.net/ont/geosparql#spatialDimension[`geo:spatialDimension`],  http://www.opengis.net/ont/geosparql#isEmpty[`geo:isEmpty`],  http://www.opengis.net/ont/geosparql#isSimple[`geo:isSimple`],  http://www.opengis.net/ont/geosparql#hasSerialization[`geo:hasSerialization`] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving these properties return the correct result for a test dataset.
.. *Reference*: <<_standard_properties_for_geogeometry>>
.. *Test Type*: Capabilities

==== A.3.1.4 `/conf/geometry-extension/query-functions`
*Requirement*: `/req/geometry-extension/query-functions`  
Implementations shall support http://www.opengis.net/def/function/geosparql/distance[`geof:distance`], http://www.opengis.net/def/function/geosparql/buffer[`geof:buffer`], http://www.opengis.net/def/function/geosparql/convexHull[`geof:convexHull`], http://www.opengis.net/def/function/geosparql/intersection[`geof:intersection`], http://www.opengis.net/def/function/geosparql/union[`geof:union`], http://www.opengis.net/def/function/geosparql/difference[`geof:difference`], http://www.opengis.net/def/function/geosparql/symDifference[`geof:symDifference`], http://www.opengis.net/def/function/geosparql/envelope[`geof:envelope`] and http://www.opengis.net/def/function/geosparql/boundary[`geof:boundary`] as SPARQL extension functions, consistent with the definitions of the corresponding functions (distance, buffer, convexHull, intersection, difference, symDifference, envelope and boundary respectively) in Simple Features <<ISO19125-1>>.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving each of the following functions returns the correct result for a test dataset when using the specified serialization and version: http://www.opengis.net/def/function/geosparql/distance[`geof:distance`], http://www.opengis.net/def/function/geosparql/buffer[`geof:buffer`], http://www.opengis.net/def/function/geosparql/convexHull[`geof:convexHull`], http://www.opengis.net/def/function/geosparql/intersection[`geof:intersection`], http://www.opengis.net/def/function/geosparql/union[`geof:union`], http://www.opengis.net/def/function/geosparql/difference[`geof:difference`], http://www.opengis.net/def/function/geosparql/symDifference[`geof:symDifference`], http://www.opengis.net/def/function/geosparql/envelope[`geof:envelope`] and http://www.opengis.net/def/function/geosparql/boundary[`geof:boundary`]. 
.. *Reference*: <<_non_topological_query_functions>>
.. *Test Type*: Capabilities

==== A.3.1.5 `/conf/geometry-extension/srid-function`
*Requirement*: `/req/geometry-extension/srid-function`
Implementations shall support http://www.opengis.net/def/function/geosparql/getSRID[`geof:getSRID`] as a SPARQL extension function.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a SPARQL query involving the http://www.opengis.net/def/function/geosparql/getSRID[`geof:getSRID`] function returns the correct result for a test dataset when using the specified serialization and version.
.. *Reference*: <<_function_geofgetsrid>>
.. *Test Type*: Capabilities

=== A.3.2 serialization = WKT

==== A.3.2.1 `/conf/geometry-extension/wkt-literal`
*Requirement*: `/req/geometry-extension/wkt-literal`
All http://www.opengis.net/ont/geosparql#wktLiteral[`geo:wktLiteral`] instances shall consist of an optional IRI identifying the Spatial Reference System (SRS) followed by Simple Features Well Known Text (WKT) describing a geometric value. Valid http://www.opengis.net/ont/geosparql#wktLiteral[`geo:wktLiteral`] instances are formed by concatenating a valid, absolute IRI as defined in <<IETF3987>>, one or more spaces (Unicode U+0020 character) as a separator, and a WKT string as defined in Simple Features <<ISO19125-1>>.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving  http://www.opengis.net/ont/geosparql#wktLiteral[`geo:wktLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geowktliteral>>
.. *Test Type*: Capabilities

==== A.3.2.2 `/conf/geometry-extension/wkt-literal-default-srs`
*Requirement*: `/req/geometry-extension/wkt-literal-default-srs`
The IRI http://www.opengis.net/def/crs/OGC/1.3/CRS84[<http://www.opengis.net/def/crs/OGC/1.3/CRS84>] shall be assumed as the SRS for  http://www.opengis.net/ont/geosparql#wktLiteral[`geo:wktLiterals`] that do not specify an explicit SRS IRI.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving  http://www.opengis.net/ont/geosparql#wktLiteral[`geo:wktLiteral`] values without an explicit encoded SRS IRI return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geowktliteral>>
.. *Test Type*: Capabilities

==== A.3.2.3 `/conf/geometry-extension/wkt-axis-order`
*Requirement*: `/req/geometry-extension/wkt-axis-order`
Coordinate tuples within http://www.opengis.net/ont/geosparql#wktLiteral[`geo:wktLiterals`] shall be interpreted using the axis order defined in the SRS used.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving  http://www.opengis.net/ont/geosparql#wktLiteral[`geo:wktLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geowktliteral>>
.. *Test Type*: Capabilities

==== A.3.2.4 `/conf/geometry-extension/wkt-literal-empty`
*Requirement*: `/req/geometry-extension/wkt-literal-empty`
An empty RDFS Literal of type http://www.opengis.net/ont/geosparql#wktLiteral[`geo:wktLiteral`] shall be interpreted as an empty geometry.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving empty http://www.opengis.net/ont/geosparql#wktLiteral[`geo:wktLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geowktliteral>>
.. *Test Type*: Capabilities

==== A.3.2.5 `/conf/geometry-extension/geometry-as-wkt-literal`
*Requirement*: `/req/geometry-extension/geometry-as-wkt-literal`
Implementations shall allow the RDF property http://www.opengis.net/ont/geosparql#asWKT[`geo:asWKT`] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving the http://www.opengis.net/ont/geosparql#asWKT[`geo:asWKT`] property return the correct result for a test dataset.
.. *Reference*: <<_property_geoaswkt>>
.. *Test Type*: Capabilities

==== A.3.2.6 `/req/geometry-extension/asWKT-function`
*Requirement*: `/req/geometry-extension/asWKT-function` 
Implementations shall support http://www.opengis.net/def/function/geosparql/asWKT[`geof:asWKT`], as a SPARQL extension function

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving the http://www.opengis.net/def/function/geosparql/asWKT[`geof:asWKT`] function returns the correct result for a test dataset when using the specified serialization and version.
.. *Reference*: <<_function_aswkt>>
.. *Test Type*: Capabilities

=== A.3.3 serialization = GML
==== A.3.3.1 `/conf/geometry-extension/gml-literal`
*Requirement*: `/req/geometry-extension/gml-literal`
All http://www.opengis.net/ont/geosparql#gmlLiteral[`geo:gmlLiteral`] instances shall consist of a valid element from the GML schema that implements a subtype of GM_Object as defined in [OGC 07-036].

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving http://www.opengis.net/ont/geosparql#gmlLiteral[`geo:gmlLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geogmlliteral>>
.. *Test Type*: Capabilities

==== A.3.3.2 `/conf/geometry-extension/gml-literal-empty`
*Requirement*: `/req/geometry-extension/gml-literal-empty`
An empty http://www.opengis.net/ont/geosparql#gmlLiteral[`geo:gmlLiteral`] shall be interpreted as an empty geometry.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving empty http://www.opengis.net/ont/geosparql#gmlLiteral[`geo:gmlLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geogmlliteral>>
.. *Test Type*: Capabilities

==== A.3.3.3 `/conf/geometry-extension/gml-profile`
*Requirement*: `/req/geometry-extension/gml-profile`
Implementations shall document supported GML profiles.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Examine the implementationâ€™s documentation to verify that the supported GML profiles are documented.
.. *Reference*: <<_rdfs_datatype_geogmlliteral>>
.. *Test Type*: Documentation

==== A.3.3.4 `/conf/geometry-extension/geometry-as-gml-literal`
*Requirement*: `/req/geometry-extension/geometry-as-gml-literal` 
Implementations shall allow the RDF property http://www.opengis.net/ont/geosparql#asGML[`geo:asGML`] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving the http://www.opengis.net/ont/geosparql#asGML[`geo:asGML`] property return the correct result for a test dataset.
.. *Reference*: <<_property_geoasgml>>
.. *Test Type*: Capabilities

==== A.3.3.5 `/req/geometry-extension/asGML-function`
*Requirement*: `/req/geometry-extension/asGML-function` 
Implementations shall support http://www.opengis.net/def/function/geosparql/asGML[`geof:asGML`], as a SPARQL extension function

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving the http://www.opengis.net/def/function/geosparql/asGML[`geof:asGML`] function returns the correct result for a test dataset when using the specified serialization and version.
.. *Reference*: <<_function_asgml>>
.. *Test Type*: Capabilities

=== A.3.4 serialization = GEOJSON
==== A.3.4.1 `/req/geometry-extension/geojson-literal`
*Requirement*: `/req/geometry-extension/geojson-literal`
All http://www.opengis.net/ont/geosparql#geoJSONLiteral[`geo:geoJSONLiteral`] instances shall consist of valid JSON that conforms to the GeoJSON specification <<GEOJSON>>

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving http://www.opengis.net/ont/geosparql#geoJSONLiteral[`geo:geoJSONLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_property_geoasgml>>
.. *Test Type*: Capabilities

==== A.3.4.2 `/req/geometry-extension/geojson-literal-srs`
*Requirement*: `/req/geometry-extension/geojson-literal-default-srs`
The IRI http://www.opengis.net/def/crs/OGC/1.3/CRS84[<http://www.opengis.net/def/crs/OGC/1.3/CRS84>] shall be assumed as the SRS for http://www.opengis.net/ont/geosparql#geoJSONLiteral[`geo:geoJSONLiteral`] instances that do not specify an explicit SRS IRI.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving http://www.opengis.net/ont/geosparql#geoJSONLiteral[`geo:geoJSONLiteral`] values without an explicit encoded SRS IRI return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geogeojsonliteral>>
.. *Test Type*: Capabilities

==== A.3.4.3 `/req/geometry-extension/geojson-literal-empty`
*Requirement*: `/req/geometry-extension/geojson-literal-empty`
An empty http://www.opengis.net/ont/geosparql#geoJSONLiteral[`geo:geoJSONLiteral`] shall be interpreted as an empty geometry.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving empty http://www.opengis.net/ont/geosparql#geoJSONLiteral[`geo:geoJSONLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geogeojsonliteral>>
.. *Test Type*: Capabilities

==== A.3.4.4 `/req/geometry-extension/geometry-as-geojson-literal`
*Requirement*: `/req/geometry-extension/geometry-as-geojson-literal` 
Implementations shall allow the RDF property http://www.opengis.net/ont/geosparql#asGeoJSON[`geo:asGeoJSON`] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving the http://www.opengis.net/ont/geosparql#asGeoJSON[`geo:asGeoJSON`] property return the correct result for a test dataset.
.. *Reference*: <<_property_geoasgeojson>>
.. *Test Type*: Capabilities

==== A.3.4.5 `/req/geometry-extension/asGeoJSON-function`
*Requirement*: `/req/geometry-extension/asGeoJSON-function` 
Implementations shall support http://www.opengis.net/def/function/geosparql/asGeoJSON[`geof:asGeoJSON`], as a SPARQL extension function

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving the http://www.opengis.net/def/function/geosparql/asGeoJSON[`geof:asGeoJSON`] function returns the correct result for a test dataset when using the specified serialization and version.
.. *Reference*: <<_function_asgeojson>>
.. *Test Type*: Capabilities

=== A.3.5 serialization = KML
==== A.3.5.1 `/req/geometry-extension/kml-literal`
*Requirement*: `/req/geometry-extension/kml-literal`
All http://www.opengis.net/ont/geosparql#kmlLiteral[`geo:kmlLiteral`] instances shall consist of a valid element from the KML schema that implements a `kml:AbstractObjectGroup` as defined in <<OGCKML>>.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving http://www.opengis.net/ont/geosparql#kmlLiteral[`geo:kmlLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geomklliteral>>
.. *Test Type*: Capabilities

==== A.3.5.2 `/req/geometry-extension/kml-literal-srs`
*Requirement*: `/req/geometry-extension/kml-literal-default-srs`
The IRI http://www.opengis.net/def/crs/OGC/1.3/CRS84[<http://www.opengis.net/def/crs/OGC/1.3/CRS84>] shall be assumed as the SRS for http://www.opengis.net/ont/geosparql#kmlLiteral[`geo:kmlLiterals`] that do not specify an explicit SRS IRI.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving http://www.opengis.net/ont/geosparql#kmlLiteral[`geo:kmlLiteral`]  values without an explicit encoded SRS IRI return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geomklliteral>>
.. *Test Type*: Capabilities

==== A.3.5.3 `/req/geometry-extension/kml-literal-empty`
*Requirement*: `/req/geometry-extension/kml-literal-empty`
An empty http://www.opengis.net/ont/geosparql#kmlLiteral[`geo:kmlLiteral`] shall be interpreted as an empty geometry.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving empty http://www.opengis.net/ont/geosparql#kmlLiteral[`geo:kmlLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_rdfs_datatype_geomklliteral>>
.. *Test Type*: Capabilities

==== A.3.5.4 `/req/geometry-extension/geometry-as-kml-literal`
*Requirement*: `/req/geometry-extension/geometry-as-kml-literal` 
Implementations shall allow the RDF property http://www.opengis.net/ont/geosparql#asKML[`geo:asKML`] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving the http://www.opengis.net/ont/geosparql#asKML[`geo:asKML`]  property return the correct result for a test dataset.
.. *Reference*: <<_property_geoaskml>>
.. *Test Type*: Capabilities

==== A.3.5.5 `/req/geometry-extension/asKML-function`
*Requirement*: `/req/geometry-extension/asKML-function` 
Implementations shall support http://www.opengis.net/def/function/geosparql/asKML[`geof:asKML`], as a SPARQL extension function

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving the http://www.opengis.net/def/function/geosparql/asKML[`geof:asKML`] function returns the correct result for a test dataset when using the specified serialization and version.
.. *Reference*: <<_function_askml>>
.. *Test Type*: Capabilities

=== A.3.6 serialization = DGGS
==== A.3.6.1 `/req/geometry-extension/dggs-literal`
*Requirement*: `/req/geometry-extension/dggs-literal`
All RDFS Literals of type http://www.opengis.net/ont/geosparql#dggsLiteral[`geo:dggsLiteral`] shall consist of a DGGS geometry serialization formulated according to a specific DGGS literal type identified by a datatype specializing this generic datatype.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries do not use use this datatype but instead use specializations of it.
.. *Reference*: <<_dggs_serialization_serializationdggs>>
.. *Test Type*: Capabilities

==== A.3.6.2 `/req/geometry-extension/dggs-literal-empty`
*Requirement*: `/req/geometry-extension/dggs-literal-empty`
An empty http://www.opengis.net/ont/geosparql#asDGGS[`geo:dggsLiteral`] shall be interpreted as an empty geometry.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving empty http://www.opengis.net/ont/geosparql#asDGGS[`geo:dggsLiteral`] values return the correct result for a test dataset.
.. *Reference*: <<_dggs_serialization_serializationdggs>>
.. *Test Type*: Capabilities

==== A.3.6.3 `/req/geometry-extension/geometry-as-dggs-literal`
*Requirement*: `/req/geometry-extension/geometry-as-dggs-literal` 
Implementations shall allow the RDF property http://www.opengis.net/ont/geosparql#asDGGS[`geo:asDGGS`] to be used in SPARQL graph patterns.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving the http://www.opengis.net/ont/geosparql#asDGGS[`geo:asDGGS`] property return the correct result for a test dataset.
.. *Reference*: <<_property_geoasdggs>>
.. *Test Type*: Capabilities

==== A.3.6.4 `/req/geometry-extension/asDGGS-function`
*Requirement*: `/req/geometry-extension/asDGGS-function` 
Implementations shall support http://www.opengis.net/def/function/geosparql/asDGGS[`geof:asDGGS`], as a SPARQL extension function

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving the http://www.opengis.net/def/function/geosparql/asDGGS[`geof:asDGGS`] function returns the correct result for a test dataset when using the specified serialization and version.
.. *Reference*: <<_function_asdggs>>
.. *Test Type*: Capabilities

== A.4 Conformance Class: Geometry Topology Extension (relation_family, serialization, version)

*Conformance Class IRI*: `/conf/geometry-topology-extension`

=== A.4.1 Tests for all relation families
==== A.4.1.1 `/conf/geometry-topology-extension/relate-query-function`
*Requirement*: `/req/geometry-topology-extension/relate-query-function`
Implementations shall support http://www.opengis.net/def/function/geosparql/relate[`geof:relate`] as a SPARQL extension function, consistent with the relate operator defined in Simple Features <<ISO19125-1>>.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving the http://www.opengis.net/def/function/geosparql/relate[`geof:relate`] function returns the correct result for a test dataset when using the specified serialization and version.
.. *Reference*: <<_common_query_functions>>
.. *Test Type*: Capabilities

=== A.4.2 relation_family = Simple Features
==== A.4.2.1 `/conf/geometry-topology-extension/sf-query-functions`
*Requirement*: `/req/geometry-topology-extension/sf-query-functions`
Implementations shall support http://www.opengis.net/def/function/geosparql/sfEquals[`geof:sfEquals`], http://www.opengis.net/def/function/geosparql/sfDisjoint[`geof:sfDisjoint`], http://www.opengis.net/def/function/geosparql/efIntersects[`geof:sfIntersects`], http://www.opengis.net/def/function/geosparql/sfTouches[`geof:sfTouches`], http://www.opengis.net/def/function/geosparql/sfCrosses[`geof:sfCrosses`], http://www.opengis.net/def/function/geosparql/sfWithin[`geof:sfWithin`], http://www.opengis.net/def/function/geosparql/sfContains[`geof:sfContains`], http://www.opengis.net/def/function/geosparql/sfOverlaps[`geof:sfOverlaps`] as SPARQL extension functions, consistent with their corresponding DE-9IM intersection patterns, as defined by Simple Features <<ISO19125-1>>.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving each of the following functions returns the correct result for a test dataset when using the specified serialization and version: http://www.opengis.net/def/function/geosparql/sfEquals[`geof:sfEquals`], http://www.opengis.net/def/function/geosparql/sfDisjoint[`geof:sfDisjoint`], http://www.opengis.net/def/function/geosparql/efIntersects[`geof:sfIntersects`], http://www.opengis.net/def/function/geosparql/sfTouches[`geof:sfTouches`], http://www.opengis.net/def/function/geosparql/sfCrosses[`geof:sfCrosses`], http://www.opengis.net/def/function/geosparql/sfWithin[`geof:sfWithin`], http://www.opengis.net/def/function/geosparql/sfContains[`geof:sfContains`], http://www.opengis.net/def/function/geosparql/sfOverlaps[`geof:sfOverlaps`] .
.. *Reference*: <<_simple_features_relation_family_relation_familysimple_features>>
.. *Test Type*: Capabilities

=== A.4.3 relation_family = Egenhofer
==== A.4.3.1 `/conf/geometry-topology-extension/eh-query-functions`
*Requirement*: `/req/geometry-topology-extension/eh-query-functions`
Implementations shall support http://www.opengis.net/def/function/geosparql/ehEquals[`geof:ehEquals`], http://www.opengis.net/def/function/geosparql/ehDisjoint[`geof:ehDisjoint`], http://www.opengis.net/def/function/geosparql/ehMeet[`geof:ehMeet`], http://www.opengis.net/def/function/geosparql/ehOverlap[`geof:ehOverlap`], http://www.opengis.net/def/function/geosparql/ehCovers[`geof:ehCovers`], http://www.opengis.net/def/function/geosparql/ehCoveredBy[`geof:ehCoveredBy`], http://www.opengis.net/def/function/geosparql/ehInside[`geof:ehInside`], http://www.opengis.net/def/function/geosparql/ehContains[`geof:ehContains`] as SPARQL extension functions, consistent with their corresponding DE-9IM intersection patterns, as defined by Simple Features [ISO 19125- 1].

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving each of the following functions returns the correct result for a test dataset when using the specified serialization and version: http://www.opengis.net/def/function/geosparql/ehEquals[`geof:ehEquals`], http://www.opengis.net/def/function/geosparql/ehDisjoint[`geof:ehDisjoint`], http://www.opengis.net/def/function/geosparql/ehMeet[`geof:ehMeet`], http://www.opengis.net/def/function/geosparql/ehOverlap[`geof:ehOverlap`], http://www.opengis.net/def/function/geosparql/ehCovers[`geof:ehCovers`], http://www.opengis.net/def/function/geosparql/ehCoveredBy[`geof:ehCoveredBy`], http://www.opengis.net/def/function/geosparql/ehInside[`geof:ehInside`], http://www.opengis.net/def/function/geosparql/ehContains[`geof:ehContains`].
.. *Reference*: <<_egenhofer_relation_family_relation_familyegenhofer>>
.. *Test Type*: Capabilities

=== A.4.4 relation_family = RCC8
==== A.4.4.1 `/conf/geometry-topology-extension/rcc8-query-functions`
*Requirement*: `/req/geometry-topology-extension/rcc8-query-functions`
Implementations shall support http://www.opengis.net/def/function/geosparql/rcc8eq[`geof:rcc8eq`], http://www.opengis.net/def/function/geosparql/rcc8dc[`geof:rcc8dc`], http://www.opengis.net/def/function/geosparql/rcc8ec[`geof:rcc8ec`], http://www.opengis.net/def/function/geosparql/rcc8po[`geof:rcc8po`], http://www.opengis.net/def/function/geosparql/rcc8tppi[`geof:rcc8tppi`], http://www.opengis.net/def/function/geosparql/rcc8tpp[`geof:rcc8tpp`], http://www.opengis.net/def/function/geosparql/rcc8ntpp[`geof:rcc8ntpp`], http://www.opengis.net/def/function/geosparql/rcc8ntppi[`geof:rcc8ntppi`] as SPARQL extension functions, consistent with their corresponding DE-9IM intersection patterns, as defined by Simple Features <<ISO19125-1>>.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving each of the following functions returns the correct result for a test dataset when using the specified serialization and version: http://www.opengis.net/def/function/geosparql/rcc8eq[`geof:rcc8eq`], http://www.opengis.net/def/function/geosparql/rcc8dc[`geof:rcc8dc`], http://www.opengis.net/def/function/geosparql/rcc8ec[`geof:rcc8ec`], http://www.opengis.net/def/function/geosparql/rcc8po[`geof:rcc8po`], http://www.opengis.net/def/function/geosparql/rcc8tppi[`geof:rcc8tppi`], http://www.opengis.net/def/function/geosparql/rcc8tpp[`geof:rcc8tpp`], http://www.opengis.net/def/function/geosparql/rcc8ntpp[`geof:rcc8ntpp`], http://www.opengis.net/def/function/geosparql/rcc8ntppi[`geof:rcc8ntppi`] .
.. *Reference*: <<_rcc8_relation_family_relation_familyrcc8>>
.. *Test Type*: Capabilities

== A.5 Conformance Class: RDFS Entailment Extension (relation_family, serialization, version)

*Conformance Class IRI*: `/conf/rdfs-entailment-extension`

=== A.5.1 Tests for all implementations
==== A.5.1.1 `/conf/rdfsentailmentextension/bgp-rdfs-ent`
*Requirement*: `/req/rdfs-entailment-extension/bgp-rdfs-ent`
Basic graph pattern matching shall use the semantics defined by the RDFS Entailment Regime <<SPARQLENT>>.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving entailed RDF triples returns the correct result for a test dataset using the specified serialization, version and relation_family.
.. *Reference*: <<_common_requirements>>
.. *Test Type*: Capabilities

=== A.5.2 serialization=WKT
==== A.5.2.1 `/conf/rdfs-entailment-extension/wkt-geometry-types`
*Requirement*: `/req/rdfs-entailment-extension/wkt-geometry-types`
Implementations shall support graph patterns involving terms from an RDFS/OWL class hierarchy of geometry types consistent with the one in the specified version of Simple Features <<ISO19125-1>>.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving WKT Geometry types returns the correct result for a test dataset using the specified version of Simple Features. 
.. *Reference*: <<_geometry_class_hierarchy>>
.. *Test Type*: Capabilities

=== A.5.3 serialization=GML
==== A.5.3.1 `/conf/rdfs-entailment-extension/gml-geometry-types`
*Requirement*: `/req/rdfs-entailment-extension/gml-geometry-types` 
Implementations shall support graph patterns involving terms from an RDFS/OWL class hierarchy of geometry types consistent with the GML schema that implements GM_Object using the specified version of GML <<OGC07-036>>.

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that a set of SPARQL queries involving GML Geometry types returns the correct result for a test dataset using the specified version of GML.
.. *Reference*: <<_geometry_class_hierarchy_2>>
.. *Test Type*: Capabilities

== A.6 Conformance Class: Query Rewrite Extension (relation_family, serialization, version)

*Conformance Class IRI*: `/conf/query-rewrite-extension`

=== A.6.1 relation_family = Simple Features
==== A.6.1.1 `/conf/query-rewrite-extension/sf-query-rewrite`
*Requirement*: `/req/query-rewrite-extension/sf-query-rewrite`
Basic graph pattern matching shall use the semantics defined by the RIF Core Entailment Regime <<SPARQLENT>> for the RIF rules <<RIFCORE>> http://www.opengis.net/def/rule/geosparql/sfEquals[`geor:sfEquals`], http://www.opengis.net/def/rule/geosparql/sfDisjoint[`geor:sfDisjoint`], http://www.opengis.net/def/rule/geosparql/sfIntersects[`geor:sfIntersects`], http://www.opengis.net/def/rule/geosparql/sfTouches[`geor:sfTouches`], http://www.opengis.net/def/rule/geosparql/sfCrosses[`geor:sfCrosses`], http://www.opengis.net/def/rule/geosparql/sfWithin[`geor:sfWithin`], http://www.opengis.net/def/rule/geosparql/sfContains[`geor:sfContains`] and http://www.opengis.net/def/rule/geosparql/sfOverlaps[`geor:sfOverlaps`]..

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving the following query transformation rules return the correct result for a test dataset when using the specified serialization and version: http://www.opengis.net/def/rule/geosparql/sfEquals[`geor:sfEquals`], http://www.opengis.net/def/rule/geosparql/sfDisjoint[`geor:sfDisjoint`], http://www.opengis.net/def/rule/geosparql/sfIntersects[`geor:sfIntersects`], http://www.opengis.net/def/rule/geosparql/sfTouches[`geor:sfTouches`], http://www.opengis.net/def/rule/geosparql/sfCrosses[`geor:sfCrosses`], http://www.opengis.net/def/rule/geosparql/sfWithin[`geor:sfWithin`], http://www.opengis.net/def/rule/geosparql/sfContains[`geor:sfContains`] and http://www.opengis.net/def/rule/geosparql/sfOverlaps[`geor:sfOverlaps`].
.. *Reference*: <<_simple_features_relation_family_relation_familysimple_features_2>>
.. *Test Type*: Capabilities

=== A.6.2 relation_family = Egenhofer
==== A.6.2.1 `/conf/query-rewrite-extension/eh-query-rewrite`
*Requirement*: `/req/query-rewrite-extension/eh-query-rewrite`
Basic graph pattern matching shall use the semantics defined by the RIF Core Entailment Regime <<SPARQLENT>> for the RIF rules <<RIFCORE>> http://www.opengis.net/def/rule/geosparql/ehEquals[`geor:ehEquals`], http://www.opengis.net/def/rule/geosparql/ehDisjoint[`geor:ehDisjoint`], http://www.opengis.net/def/rule/geosparql/ehMeet[`geor:ehMeet`], http://www.opengis.net/def/rule/geosparql/ehOverlap[`geor:ehOverlap`], http://www.opengis.net/def/rule/geosparql/ehCovers[`geor:ehCovers`], http://www.opengis.net/def/rule/geosparql/ehCoveredBy[`geor:ehCoveredBy`], http://www.opengis.net/def/rule/geosparql/ehInside[`geor:ehInside`], http://www.opengis.net/def/rule/geosparql/ehContains[`geor:ehContains`].

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving the following query transformation rules return the correct result for a test dataset when using the specified serialization and version: http://www.opengis.net/def/rule/geosparql/ehEquals[`geor:ehEquals`], http://www.opengis.net/def/rule/geosparql/ehDisjoint[`geor:ehDisjoint`], http://www.opengis.net/def/rule/geosparql/ehMeet[`geor:ehMeet`], http://www.opengis.net/def/rule/geosparql/ehOverlap[`geor:ehOverlap`], http://www.opengis.net/def/rule/geosparql/ehCovers[`geor:ehCovers`], http://www.opengis.net/def/rule/geosparql/ehCoveredBy[`geor:ehCoveredBy`], http://www.opengis.net/def/rule/geosparql/ehInside[`geor:ehInside`], http://www.opengis.net/def/rule/geosparql/ehContains[`geor:ehContains`].
.. *Reference*: <<_egenhofer_relation_family_relation_familyegenhofer_2>>
.. *Test Type*: Capabilities

=== A.6.3 relation_family = RCC8
==== A.6.3.1 `/conf/query-rewrite-extension/rcc8-query-rewrite`
*Requirement*: `/req/query-rewrite-extension/rcc8-query-rewrite`
Basic graph pattern matching shall use the semantics defined by the RIF Core Entailment Regime <<SPARQLENT>> for the RIF rules <<RIFCORE>> http://www.opengis.net/def/rule/geosparql/rcc8eq[`geor:rcc8eq`], http://www.opengis.net/def/rule/geosparql/rcc8dc[`geor:rcc8dc`], http://www.opengis.net/def/rule/geosparql/rcc8ec[`geor:rcc8ec`], http://www.opengis.net/def/rule/geosparql/rcc8po[`geor:rcc8po`], http://www.opengis.net/def/rule/geosparql/rcc8tppi[`geor:rcc8tppi`], http://www.opengis.net/def/rule/geosparql/rcc8tpp[`geor:rcc8tpp`], http://www.opengis.net/def/rule/geosparql/rcc8ntpp[`geor:rcc8ntpp`], http://www.opengis.net/def/rule/geosparql/rcc8ntppi[`geor:rcc8ntppi`].

.. *Test purpose*: Check conformance with this requirement
.. *Test method*: Verify that queries involving the following query transformation rules return the correct result for a test dataset when using the specified serialization and version: http://www.opengis.net/def/rule/geosparql/rcc8eq[`geor:rcc8eq`], http://www.opengis.net/def/rule/geosparql/rcc8dc[`geor:rcc8dc`], http://www.opengis.net/def/rule/geosparql/rcc8ec[`geor:rcc8ec`], http://www.opengis.net/def/rule/geosparql/rcc8po[`geor:rcc8po`], http://www.opengis.net/def/rule/geosparql/rcc8tppi[`geor:rcc8tppi`], http://www.opengis.net/def/rule/geosparql/rcc8tpp[`geor:rcc8tpp`], http://www.opengis.net/def/rule/geosparql/rcc8ntpp[`geor:rcc8ntpp`], http://www.opengis.net/def/rule/geosparql/rcc8ntppi[`geor:rcc8ntppi`].
.. *Reference*: <<_rcc8_relation_family_relation_familyrcc8_2>>
.. *Test Type*: Capabilities
